# ğŸ—ï¸ Arquitectura Visual del MÃ³dulo de Visitas

## ğŸ“ Diagrama de Componentes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         HOME.SVELTE                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  [Nueva Visita] [Historial] [Capturas] [ConfiguraciÃ³n]    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ onClick
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VISITA VERIFICACION.SVELTE                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                    STEPPER.SVELTE                          â”‚      â”‚
â”‚  â”‚  [Tipo] â”€â”€â–º [Proyecto] â”€â”€â–º [ValidaciÃ³n] â”€â”€â–º [Captura] â”€â”€â–º [Cierre] â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚             CONTENIDO DEL PASO ACTUAL                     â”‚       â”‚
â”‚  â”‚                                                            â”‚       â”‚
â”‚  â”‚  {#if currentStep === 0}                                  â”‚       â”‚
â”‚  â”‚    <Step0TipoVisita />                                    â”‚       â”‚
â”‚  â”‚  {:else if currentStep === 1}                             â”‚       â”‚
â”‚  â”‚    <Step1SeleccionUP />                                   â”‚       â”‚
â”‚  â”‚  {:else if currentStep === 2}                             â”‚       â”‚
â”‚  â”‚    <Step2Validacion />                                    â”‚       â”‚
â”‚  â”‚  {:else if currentStep === 3}                             â”‚       â”‚
â”‚  â”‚    <Step3Captura />                                       â”‚       â”‚
â”‚  â”‚  {:else if currentStep === 4}                             â”‚       â”‚
â”‚  â”‚    <Step4Comunicaciones />                                â”‚       â”‚
â”‚  â”‚  {/if}                                                    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   [â—„ AtrÃ¡s]                      [Continuar â–º] / [âœ“ Enviar]â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Flujo de Datos (Data Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Usuario    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ InteracciÃ³n
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    COMPONENTES SVELTE                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Step0TipoVisita.svelte       â”‚  â”‚
â”‚  â”‚  Step1SeleccionUP.svelte      â”‚  â”‚
â”‚  â”‚  Step2Validacion.svelte       â”‚  â”‚
â”‚  â”‚  Step3Captura.svelte          â”‚  â”‚
â”‚  â”‚  Step4Comunicaciones.svelte   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ bind:value
                â”‚ on:event
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      VISITASTORE.TS (Store)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  State:                        â”‚  â”‚
â”‚  â”‚    - currentStep: 0-4          â”‚  â”‚
â”‚  â”‚    - data: Partial<Visita>     â”‚  â”‚
â”‚  â”‚    - isLoading: boolean        â”‚  â”‚
â”‚  â”‚    - error: string | null      â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  Actions:                      â”‚  â”‚
â”‚  â”‚    - nextStep()                â”‚  â”‚
â”‚  â”‚    - updateData()              â”‚  â”‚
â”‚  â”‚    - captureGPS()              â”‚  â”‚
â”‚  â”‚    - addUPEntorno()            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ API Calls
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        VISITAS.TS (Service)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  fetchUnidadesProyecto()       â”‚  â”‚
â”‚  â”‚  fetchCentrosGestores()        â”‚  â”‚
â”‚  â”‚  createVisitaVerificacion()    â”‚  â”‚
â”‚  â”‚  uploadPhotos()                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ HTTP
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      API-CLIENT.TS (HTTP Client)     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  get(), post(), put()          â”‚  â”‚
â”‚  â”‚  + Auth Headers                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ HTTPS
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    API RAILWAY (Backend)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  GET  /unidades-proyecto/...   â”‚  â”‚
â”‚  â”‚  GET  /centros-gestores/...    â”‚  â”‚
â”‚  â”‚  POST /visitas-verificacion    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© Componentes UI (Atomic Design)

```
ÃTOMOS (Atoms)
â”œâ”€â”€ Button.svelte
â”œâ”€â”€ Input.svelte
â”œâ”€â”€ Textarea.svelte
â”œâ”€â”€ Select.svelte
â””â”€â”€ Toggle.svelte

MOLÃ‰CULAS (Molecules)
â”œâ”€â”€ Card.svelte
â””â”€â”€ Stepper.svelte

ORGANISMOS (Organisms)
â”œâ”€â”€ Step0TipoVisita.svelte
â”œâ”€â”€ Step1SeleccionUP.svelte
â”œâ”€â”€ Step2Validacion.svelte
â”œâ”€â”€ Step3Captura.svelte
â””â”€â”€ Step4Comunicaciones.svelte

PLANTILLAS (Templates)
â””â”€â”€ VisitaVerificacion.svelte

PÃGINAS (Pages)
â””â”€â”€ Home.svelte
```

---

## ğŸ“Š Modelo de Datos (JSON Structure)

```json
{
  "VisitaVerificacion": {
    "tipo_visita": "verificacion",
    "upid": 123,
    "nombre_up": "string",
    
    "validacion": {
      "esCorrecta": true,
      "comentario": "string | null"
    },
    
    "coordenadas_gps": {
      "latitude": 4.6097,
      "longitude": -74.0817,
      "accuracy": 15.5,
      "timestamp": 1701089400000
    },
    
    "descripcion_intervencion": "string",
    "descripcion_solicitud": "string",
    
    "up_entorno": [
      {
        "id": "entorno_1701089400_abc123",
        "centro_gestor": "SDIS",
        "descripcion_complemento": "string"
      }
    ],
    
    "estado_360": "Antes" | "Durante" | "DespuÃ©s",
    "viabilidad_alcalde": true,
    "entrega_publica": false,
    "campo_comunicaciones": "string",
    "photos_url": ["https://...", "https://..."],
    "fecha_registro": "2025-11-27T10:30:00Z"
  }
}
```

---

## ğŸ” Seguridad y AutenticaciÃ³n

```
Usuario
  â”‚
  â”‚ Login
  â–¼
Firebase Auth
  â”‚
  â”‚ Token JWT
  â–¼
authStore
  â”‚
  â”‚ token
  â–¼
ApiClient
  â”‚
  â”‚ Authorization: Bearer {token}
  â–¼
Railway API
  â”‚
  â”‚ Verify token
  â–¼
Backend Routes
```

---

## ğŸ“± Responsive Breakpoints

```
Mobile First Approach:

0px - 640px    â†’ Mobile (default)
640px - 768px  â†’ Large Mobile
768px - 1024px â†’ Tablet
1024px+        â†’ Desktop

ImplementaciÃ³n:

.component {
  /* Mobile (default) */
  width: 100%;
  padding: 1rem;
}

@media (max-width: 640px) {
  /* Ajustes especÃ­ficos mÃ³vil */
  .action-grid {
    grid-template-columns: 1fr;
  }
}

@media (min-width: 768px) {
  /* Tablet */
  .component {
    max-width: 600px;
  }
}
```

---

## ğŸ¨ Paleta de Colores

```
Colores Principales:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Primary Gradient                    â”‚
â”‚ #667eea â†’ #764ba2                   â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Estados:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Success  â”‚ Error    â”‚ Warning      â”‚
â”‚ #10b981  â”‚ #ef4444  â”‚ #f59e0b      â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆ     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Neutrales:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Text     â”‚ Secondaryâ”‚ Border       â”‚
â”‚ #1f2937  â”‚ #6b7280  â”‚ #e5e7eb      â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆ     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Dark Mode:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BG Dark  â”‚ Surface  â”‚ Border       â”‚
â”‚ #111827  â”‚ #1f2937  â”‚ #374151      â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆ     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ºï¸ NavegaciÃ³n del Usuario

```
[Inicio de SesiÃ³n]
        â”‚
        â–¼
    [Home Dashboard]
        â”‚
        â”œâ”€â–º [Nueva Visita] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                  â”‚
        â”œâ”€â–º [Historial] (prÃ³ximamente)    â”‚
        â”‚                                  â”‚
        â”œâ”€â–º [Capturas] (prÃ³ximamente)     â”‚
        â”‚                                  â”‚
        â””â”€â–º [ConfiguraciÃ³n] (prÃ³ximamente)â”‚
                                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
[Formulario de Visita]
        â”‚
        â”œâ”€â–º Paso 0: Tipo de Visita
        â”‚       â”‚
        â”‚       â–¼
        â”œâ”€â–º Paso 1: SelecciÃ³n UP
        â”‚       â”‚
        â”‚       â–¼
        â”œâ”€â–º Paso 2: ValidaciÃ³n
        â”‚       â”‚
        â”‚       â–¼
        â”œâ”€â–º Paso 3: Captura TÃ©cnica
        â”‚       â”‚   â”œâ”€â–º Capturar GPS
        â”‚       â”‚   â”œâ”€â–º Descripciones
        â”‚       â”‚   â””â”€â–º UP Entorno
        â”‚       â”‚
        â”‚       â–¼
        â””â”€â–º Paso 4: Comunicaciones
                â”‚   â”œâ”€â–º Estado 360
                â”‚   â”œâ”€â–º Toggles
                â”‚   â””â”€â–º Fotos
                â”‚
                â–¼
        [Enviar al Backend]
                â”‚
                â–¼
        [Mensaje de Ã‰xito]
                â”‚
                â–¼
        [Volver al Home]
```

---

## ğŸ”„ Estado del Store (State Machine)

```
visitaStore State:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  currentStep: 0                     â”‚
â”‚  completedSteps: Set<0, 1, 2>      â”‚
â”‚  isLoading: false                   â”‚
â”‚  error: null                        â”‚
â”‚                                     â”‚
â”‚  data: {                            â”‚
â”‚    tipo_visita: "verificacion"     â”‚
â”‚    upid: 123                        â”‚
â”‚    validacion: {...}                â”‚
â”‚    coordenadas_gps: {...}           â”‚
â”‚    ...                              â”‚
â”‚  }                                  â”‚
â”‚                                     â”‚
â”‚  unidadesProyecto: [...]            â”‚
â”‚  centrosGestores: [...]             â”‚
â”‚  selectedUP: {...}                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Transiciones:
  reset() â†’ Estado inicial
  nextStep() â†’ currentStep++
  previousStep() â†’ currentStep--
  updateData() â†’ Actualizar data
  captureGPS() â†’ Obtener coords
  addUPEntorno() â†’ Agregar a array
```

---

## ğŸŒ APIs Externas Utilizadas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Geolocation API (Browser)        â”‚
â”‚  navigator.geolocation              â”‚
â”‚    - getCurrentPosition()           â”‚
â”‚    - watchPosition()                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    File API (Browser)               â”‚
â”‚    - FileReader                     â”‚
â”‚    - readAsDataURL()                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Fetch API (HTTP Client)          â”‚
â”‚    - fetch()                        â”‚
â”‚    - Headers                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Firebase Auth                    â”‚
â”‚    - signInWithEmailAndPassword()   â”‚
â”‚    - onAuthStateChanged()           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Firebase Storage (Pendiente)     â”‚
â”‚    - uploadBytes()                  â”‚
â”‚    - getDownloadURL()               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Bundle Size Analysis

```
Componentes Custom:
  Button.svelte         ~2 KB
  Card.svelte           ~1.5 KB
  Input.svelte          ~3 KB
  Textarea.svelte       ~2.5 KB
  Select.svelte         ~4 KB
  Toggle.svelte         ~1.5 KB
  Stepper.svelte        ~3 KB
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Total UI Components:  ~17.5 KB

Componentes Negocio:
  Step0-4 + Main        ~25 KB
  
Stores & Logic:
  visitaStore.ts        ~5 KB
  visitas.ts (API)      ~3 KB
  geolocation.ts        ~4 KB
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Total Module:         ~54.5 KB

Dependencies (ya existentes):
  Svelte runtime        ~15 KB
  Firebase              ~40 KB
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Total App Bundle:     ~109.5 KB (gzipped)

ğŸ¯ Excelente para PWA mÃ³vil!
```

---

## ğŸ§ª Testing Checklist Visual

```
FUNCIONAL
â”œâ”€â”€ âœ… Paso 0: SelecciÃ³n tipo
â”œâ”€â”€ âœ… Paso 1: Select UP
â”œâ”€â”€ âœ… Paso 2: ValidaciÃ³n
â”œâ”€â”€ âœ… Paso 3: GPS + Descripciones
â””â”€â”€ âœ… Paso 4: Comunicaciones + Fotos

VALIDACIONES
â”œâ”€â”€ âœ… Required fields
â”œâ”€â”€ âœ… Conditional validation
â”œâ”€â”€ âœ… GPS permissions
â””â”€â”€ âœ… File upload limits

RESPONSIVE
â”œâ”€â”€ âœ… iPhone SE (375px)
â”œâ”€â”€ âœ… iPhone 12 (390px)
â”œâ”€â”€ âœ… Android (360px)
â””â”€â”€ âœ… Tablet (768px)

API
â”œâ”€â”€ âœ… Load UPs
â”œâ”€â”€ âœ… Load Centros
â”œâ”€â”€ ğŸ”´ Create Visita (pendiente)
â””â”€â”€ ğŸ”´ Upload Photos (pendiente)

UX
â”œâ”€â”€ âœ… Loading states
â”œâ”€â”€ âœ… Error messages
â”œâ”€â”€ âœ… Success feedback
â””â”€â”€ âœ… Navigation flow
```

---

## ğŸš€ Deployment Pipeline

```
Development:
  npm run dev
    â”‚
    â–¼
  localhost:5173
    â”‚
    â–¼
  Testing Manual


Production:
  npm run build
    â”‚
    â–¼
  dist/ folder
    â”‚
    â–¼
  Vercel/Netlify Deploy
    â”‚
    â–¼
  https://app.calitrack360.com


CI/CD (Futuro):
  Git Push
    â”‚
    â–¼
  GitHub Actions
    â”‚
    â”œâ”€â–º Run Tests
    â”‚
    â”œâ”€â–º Build
    â”‚
    â””â”€â–º Deploy
```

---

**Nota:** Este diagrama visual complementa la documentaciÃ³n tÃ©cnica y sirve como referencia rÃ¡pida de la arquitectura del mÃ³dulo.
